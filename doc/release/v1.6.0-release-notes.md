# v1.6.0: 当前分类导出与智能选择功能

## 🎯 主要新功能

### 📂 当前分类导出

- **新增**：当前分类导出选项，支持一键导出当前选中分类下的所有条目
- **智能默认选择**：根据上下文自动选择最合适的导出范围
    - 🥇 **选中条目**（最高优先级）：有选中条目时默认导出选中条目
    - 🥈 **当前分类**（第二优先级）：选中分类但无选中条目时默认导出当前分类
    - 🥉 **全部条目**（默认选项）：无选中项时默认导出全部条目

### 🔄 动态界面更新

- **实时描述更新**：导出描述文字根据选择实时更新
- **清晰内容提示**：明确显示将要导出的内容数量和范围
- **用户友好体验**：无需猜测导出范围，界面一目了然

## ✨ 功能特性

- 🔗 **XMnote 集成**: 与 XMnote 服务器无缝连接，实现数据导出
- 📤 **智能导出选项**: 支持全部条目、选定条目或当前分类导出，具备智能默认选择
- 📂 **当前分类导出**: 新增分类导出功能，一键导出当前选中分类下的所有条目
- 🎯 **智能默认选择**: 根据上下文自动选择最合适的导出范围（优先级：选中条目 > 当前分类 > 全部条目）
- 🔄 **动态界面更新**: 导出描述文字实时更新，清楚显示将要导出的内容
- ⚙️ **可配置服务器设置**: 简单设置 IP、端口、超时时间等参数
- 🖱️ **右键菜单支持**: 通过右键菜单快速访问集合和条目的导出功能
- 🌍 **多语言支持**: 提供中文和英文界面

## 🛠️ 技术改进

### 架构优化

- **扩展对话框架构**：创建 `ExtendedExportDialog` 类，保持向后兼容性
- **模块化设计**：新增独立的扩展对话框模块
- **类型系统增强**：完善 TypeScript 类型定义，支持新的导出范围

### API 集成

- **分类检测功能**：集成 Zotero 分类 API (`getSelectedCollection()`)
- **条目提取优化**：改进分类条目提取逻辑
- **事件处理优化**：增强 DOM 事件监听和界面更新机制

## 📦 安装方法

1. 下载 `zotero-xmnote-plugin.xpi` 文件
2. 在 Zotero 中，点击 **工具** → **插件**
3. 点击齿轮图标 ⚙️ → **从文件安装插件**
4. 选择下载的 `.xpi` 文件
5. 重启 Zotero

## 🚀 使用方法

### 智能导出选择

插件会根据当前上下文自动选择最合适的导出选项：

1. **有选中条目时**：默认选择"选定条目"
2. **选中分类但无选中条目时**：默认选择"当前分类"
3. **无选中项时**：默认选择"全部条目"

### 导出对话框

- 提供三种导出选项的灵活切换
- 描述文字动态更新，清楚显示导出范围
- 支持手动切换导出模式

## 🔄 向后兼容性

- ✅ 完全兼容现有导出功能
- ✅ 保持原有菜单和快捷方式
- ✅ 无破坏性更改
- ✅ 现有工作流程无需调整

## 🎉 适用场景

- **研究人员**：按分类整理的文献导出
- **学生**：课程相关资料分类导出
- **学者**：主题相关文献集中导出
- **知识工作者**：项目相关资料快速导出

---

**发布日期**：2025-08-21  
**上一版本**：v1.5.0  
**主要更新**：当前分类导出功能与智能默认选择

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>